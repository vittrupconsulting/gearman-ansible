---
#changed_when: False
- ansible.builtin.file:
    path: "/etc/ansible"
    state: "absent"

- ansible.builtin.git:
    repo: 'https://github.com/vittrupconsulting/gearman-ansible.git'
    dest: "/etc/ansible"

- ansible.builtin.file:
    path: "/etc/ansible/facts.d/"
    state: "directory"

- ansible.builtin.copy:
    content: "{{ ansible_local['roles'] | default(['gearman-client']) | to_nice_json }}"
    dest: "/etc/ansible/facts.d/roles.fact"

#- ansible.builtin.copy:
#    src: "ansible.cfg"
#    dest: "/etc/ansible/ansible.cfg"
#
#- ansible.builtin.copy:
#    src: "ansible_rsa"
#    dest: "/etc/ansible/ansible_rsa"
#    mode: "0700"
#    owner: "vagrant"
#    group: "vagrant"
#
#- ansible.builtin.copy:
#    src: "common.yml"
#    dest: "/etc/ansible/common.yml"
